<!DOCTYPE html>
<html>
  <head>
    <title>PlayList Gen</title>

    <link rel="stylesheet" type="text/css" href="main.css" media="”screen”" />
  </head>
  <body>
    <button type="button" onclick="document.location='index.html'">Back</button>

    <button type="button" onclick="document.location='heartbeatHowTo.html'">
      Help
    </button>
    <h1>Step 1: Your Heartbeat</h1>
    <h2>
      Enter your heartbeat. <br />
      This is the value calculated on the previous page using the 15 second
      timer.
    </h2>

    <script type="text/javascript">
      //https://stackoverflow.com/questions/51428556/how-can-i-disable-an-html-button-until-another-button-is-clicked#:~:text=You%20can%20just%20add%20%22disabled,them%20all%20in%20one%20place.
        function btnFunction() {
            document.getElementById("Heartbeat").readOnly = true;
        }

        function revFunction() {
            var hbp = document.getElementById("Heartbeat").value;
            if (isNaN(hbp) || hbp < 20 || hbp > 200) {
              document.getElementById("btnNext").disabled = true;
            }
            else {
              document.getElementById("btnNext").disabled = false;
            }
            
            //document.getElementById("btnNext").disabled = false;
        }

        function relFunction() {
            location.reload();
        }

      function myfunc() {
            var input = document.getElementById('Heartbeat');
            var hbp = document.getElementById("Heartbeat").value;
                if (!isNaN(hbp) & hbp > 19 & hbp < 201) {
                  alert("You Entered: " + input.value + ". Is this Correct? If not, Reset and try again.")
                }
      }
      document.write(input);



      function check() { //https://stackoverflow.com/questions/66946834/show-error-alert-if-value-is-outside-range-on-button-press

        var hbp = document.getElementById("Heartbeat").value;
        if (isNaN(hbp) || hbp < 20 || hbp > 200) {
          alert("Invalid Entry.  Please Enter a valid beartbeat, between 20 and 200 beats per minute.")
          alert("Please press Reset.")
        } else {
          //do nothing
        } 
      }

      function submitResetIfNeeded() {
        var hbp = document.getElementById("Heartbeat").value;
        if (isNaN(hbp) || hbp < 20 || hbp > 200) {
          Submit.setAttribute("disabled", true);
        }
      }
      
    </script>


    <p>Note: This value must be a whole number, at least two digits, no more than three.
    </p>

    <p class = "output" id = "output1"></p>


    <form<label for="Heartbeat">Heartbeat (BPM):</label>
    <input type="number" id="Heartbeat" name="Heartbeat" placeholder="" min="20" max="200" step=1/>

    <input type="submit" value="Submit" id = "Submit" onclick="btnFunction();revFunction(); myfunc(); check(); submitResetIfNeeded()"> </form> <br> <br>

    <script>
      var calcbpsel = sessionStorage.getItem('calcbpselection');

      var skipbpmselection = sessionStorage.getItem("Heartbeat");
      document.write("Your Last Selection: " + calcbpsel);

    </script>

      <br>
      <br>



    <button type="button" onclick="document.location='skipBPM.html'">
      Skip
    </button>

    <button id = "btnNext" type="button" onclick="document.location='Mood.html'", disabled>Next</button>
    <button id = "relbtn" type="button" onclick="relFunction()">Reset
    </button>
  </body>
</html>
