<!DOCTYPE html>
<html>
  <head>
    <title>PlayList Gen</title>

    <link rel="stylesheet" type="text/css" href="main.css" />
  </head>
  <body>
    <button type="button" onclick="document.location='index.html'">Back</button>

    <button type="button" onclick="document.location='BPMHelp.html'">
      Help
    </button>
    <h1>Step 1: Your Heartbeat</h1>
    

    <script type="text/javascript">
      //https://stackoverflow.com/questions/51428556/how-can-i-disable-an-html-button-until-another-button-is-clicked#:~:text=You%20can%20just%20add%20%22disabled,them%20all%20in%20one%20place.
        function btnFunction() {
            document.getElementById("Heartbeat").readOnly = true;
        }

        function revFunction() {
            var hbp = document.getElementById("Heartbeat").value;
            if (isNaN(hbp) || hbp < 20 || hbp > 200) {
              document.getElementById("btnNext").disabled = true;
            }
            else {
              document.getElementById("btnNext").disabled = false;
            }
            
            //document.getElementById("btnNext").disabled = false;
        }

        function relFunction() {
            location.reload();
        }

      function myfunc() {
            var input = document.getElementById('Heartbeat');
            var hbp = document.getElementById("Heartbeat").value;
              if (!isNaN(hbp) & hbp > 19 & hbp < 201) {
                alert("You Entered: " + input.value + ". Is this Correct? If not, Reset and try again.")
              }

              // sets input as calcBPFixed in sessionStorage
              sessionStorage.setItem("calcBPFixed", document.getElementById("Heartbeat").value);
            
      }


      function check() { //https://stackoverflow.com/questions/66946834/show-error-alert-if-value-is-outside-range-on-button-press

        var hbp = document.getElementById("Heartbeat").value;
        if (isNaN(hbp) || hbp < 20 || hbp > 200) {
          alert("Invalid Entry.  Please Enter a valid beartbeat, between 20 and 200 beats per minute.")
          alert("Please press Reset.")
        } else {
          //do nothing
        } 
      }

      function submitResetIfNeeded() {
        var hbp = document.getElementById("Heartbeat").value;
        if (isNaN(hbp) || hbp < 20 || hbp > 200) {
          Submit.setAttribute("disabled", true);
        }
      }
    

    </script>


    <p> Enter your heartbeat. <br /> <br>
      Follow these steps: <br>

      <br>
      1. Using you index and middle fingers together, find your pulse in your wrist or neck
      <br>
      2. Start a timer for 15 seconds on your phone, computer, watch or simply have a friend count
      
      <br>

      3.  Now, take that number of beats and multiply it by 4

      <br>

      4.  Done! Now you have your heartbeat. 


      <br>
      <br>
      Was this too confusing? <br>
      No problem, click the above "Help" button for more details and a video. <br><br>
      Don't want to do it? <br>
      No probelm too! Click the "Skip" button below to enter an estimation. 

  <br> <br>
    </p>


    <form<label for="Heartbeat">Heartbeat (BPM):</label>
    <input type="number" id="Heartbeat" name="Heartbeat" placeholder="" min="20" max="200" step=1/>

    <input type="submit" value="Submit" id = "Submit" onclick="btnFunction();revFunction(); myfunc(); check(); submitResetIfNeeded()"> </form> 

    <p>
      Note: This value must be a whole number, at least two digits, no more than three.

    </p>

      <br>
      <br>

    <button type="button" onclick="document.location='skipBPM.html'">
      Skip
    </button>

    <button id = "btnNext" type="button" onclick="document.location='Mood.html'", disabled>Next</button>
    <button id = "relbtn" type="button" onclick="relFunction()">Reset
    </button>
  </body>
</html>
